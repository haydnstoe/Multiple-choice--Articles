<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Article Usage in Context</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 2em;
      line-height: 1.5;
    }
    .question.invalid > label {
      outline: 2px solid red;
    }
    .options label {
      margin-right: 1em;
      cursor: pointer;
    }
    #progress {
      margin-bottom: 1em;
      font-size: 1.1em;
    }
    .error-message {
      color: red;
      margin-bottom: 1em;
    }
    #results {
      margin-top: 2em;
      border-top: 1px solid #ccc;
      padding-top: 1em;
    }
    .question-result {
      margin-bottom: 1em;
    }
    .correct {
      color: green;
      font-weight: bold;
    }
    .incorrect {
      color: red;
      font-weight: bold;
    }
    .explanation {
      margin-left: 1.5em;
      font-size: 0.9em;
    }
  </style>
</head>
<body>

  <h1>Fill the Missing Article</h1>
  <p>Each sentence below has exactly one missing article. Choose <em>the</em>, <em>a/an</em>, or <em>nothing</em> in context.</p>
  <div id="progress">Questions answered: 0 of 11</div>
  <div id="error" class="error-message"></div>

  <form id="articleTest">

    <p>
      1. I was strolling along
      <span id="q1" class="question">
        <span class="options">
          <label><input type="radio" name="q1" value="the"> the</label>
          <label><input type="radio" name="q1" value="a"> a/an</label>
          <label><input type="radio" name="q1" value="nothing"> nothing</label>
        </span>
      </span>
      Via Sistina one morning.
    </p>

    <p>
      2.
      <span id="q2" class="question">
        <span class="options">
          <label><input type="radio" name="q2" value="the"> the</label>
          <label><input type="radio" name="q2" value="a"> a/an</label>
          <label><input type="radio" name="q2" value="nothing"> nothing</label>
        </span>
      </span>
      Fiat Croma shot past and screeched to a smoky halt a hundred feet up the road.
    </p>

    <p>
      3. Without pause,
      <span id="q3" class="question">
        <span class="options">
          <label><input type="radio" name="q3" value="the"> the</label>
          <label><input type="radio" name="q3" value="a"> a/an</label>
          <label><input type="radio" name="q3" value="nothing"> nothing</label>
        </span>
      </span>
      driver lurched into reverse and came barrelling backwards down the street in the direction of a parking space that was precisely the length of his Fiat, less two and a half feet.
    </p>

    <p>
      4. Without slowing even fractionally, he veered
      <span id="q4" class="question">
        <span class="options">
          <label><input type="radio" name="q4" value="the"> the</label>
          <label><input type="radio" name="q4" value="a"> a/an</label>
          <label><input type="radio" name="q4" value="nothing"> nothing</label>
        </span>
      </span>
      car into the space and crashed resoundingly into a parked Renault.
    </p>

    <p>
      5. Nothing happened for
      <span id="q5" class="question">
        <span class="options">
          <label><input type="radio" name="q5" value="the"> the</label>
          <label><input type="radio" name="q5" value="a"> a/an</label>
          <label><input type="radio" name="q5" value="nothing"> nothing</label>
        </span>
      </span>
      minute.
    </p>

    <p>
      6. There was just
      <span id="q6" class="question">
        <span class="options">
          <label><input type="radio" name="q6" value="the"> the</label>
          <label><input type="radio" name="q6" value="a"> a/an</label>
          <label><input type="radio" name="q6" value="nothing"> nothing</label>
        </span>
      </span>
      hiss of escaping steam.
    </p>

    <p>
      7. Then
      <span id="q7" class="question">
        <span class="options">
          <label><input type="radio" name="q7" value="the"> the</label>
          <label><input type="radio" name="q7" value="a"> a/an</label>
          <label><input type="radio" name="q7" value="nothing"> nothing</label>
        </span>
      </span>
      driver leaped from his car.
    </p>

    <p>
      8. He gazed in profound disbelief at
      <span id="q8" class="question">
        <span class="options">
          <label><input type="radio" name="q8" value="the"> the</label>
          <label><input type="radio" name="q8" value="a"> a/an</label>
          <label><input type="radio" name="q8" value="nothing"> nothing</label>
        </span>
      </span>
      devastation before him – crumpled metal, splintered tail lights, the exhaust pipe of his own car limply grazing the pavement – and regarded it with as much mystification as if it had dropped on him from the sky.
    </p>

    <p>
      9. He kicked
      <span id="q9" class="question">
        <span class="options">
          <label><input type="radio" name="q9" value="the"> the</label>
          <label><input type="radio" name="q9" value="a"> a/an</label>
          <label><input type="radio" name="q9" value="nothing"> nothing</label>
        </span>
      </span>
      Renault in the side as hard as he could, denting the door and punishing its absent owner for having the gall to park it there.
    </p>

    <p>
      10. Peace returned once again to
      <span id="q10" class="question">
        <span class="options">
          <label><input type="radio" name="q10" value="the"> the</label>
          <label><input type="radio" name="q10" value="a"> a/an</label>
          <label><input type="radio" name="q10" value="nothing"> nothing</label>
        </span>
      </span>
      Via Sistina, apart from the occasional clank of a piece of metal dropping off the stricken Renault.
    </p>

    <p>
      11. No one but me batted
      <span id="q11" class="question">
        <span class="options">
          <label><input type="radio" name="q11" value="the"> the</label>
          <label><input type="radio" name="q11" value="a"> a/an</label>
          <label><input type="radio" name="q11" value="nothing"> nothing</label>
        </span>
      </span>
      eye.
    </p>

    <button type="submit">Submit Answers</button>
  </form>

  <div id="results"></div>

  <script>
    (function() {
      const form = document.getElementById('articleTest');
      const total = 11;
      const progressDiv = document.getElementById('progress');
      const errorDiv = document.getElementById('error');

      const correctAnswers = {
        q1: 'the',
        q2: 'a',
        q3: 'the',
        q4: 'the',
        q5: 'a',
        q6: 'the',
        q7: 'the',
        q8: 'the',
        q9: 'the',
        q10: 'the',
        q11: 'a'
      };

      const explanations = {
        q1: 'Use "the" because Via Sistina is a specific street.',
        q2: 'Use "a/an" ("a") to introduce one Fiat Croma.',
        q3: 'Use "the" to refer to that particular driver.',
        q4: 'Use "the" for that specific car.',
        q5: 'Use "a/an" ("a") for one minute.',
        q6: 'Use "the" for the specific hiss of steam.',
        q7: 'Use "the" for the driver just mentioned.',
        q8: 'Use "the" for the devastation he sees.',
        q9: 'Use "the" for that Renault he hit.',
        q10: 'Use "the" for the proper name Via Sistina.',
        q11: 'Use "a/an" ("a") before a vowel sound in "eye."'
      };

      function updateProgress() {
        let answered = 0;
        for (let i = 1; i <= total; i++) {
          if (form.querySelector(`input[name="q${i}"]:checked`)) {
            answered++;
          }
        }
        progressDiv.textContent = `Questions answered: ${answered} of ${total}`;
      }

      form.addEventListener('change', () => {
        errorDiv.textContent = '';
        document.querySelectorAll('.question.invalid').forEach(el => {
          el.classList.remove('invalid');
        });
        updateProgress();
      });

      form.addEventListener('submit', function(e) {
        e.preventDefault();
        errorDiv.textContent = '';
        let allAnswered = true;

        // validate all answered
        for (let i = 1; i <= total; i++) {
          const container = document.getElementById(`q${i}`);
          if (!form.querySelector(`input[name="q${i}"]:checked`)) {
            allAnswered = false;
            container.classList.add('invalid');
          }
        }
        if (!allAnswered) {
          errorDiv.textContent = 'Please answer all questions before submitting.';
          return;
        }

        // scoring
        let score = 0;
        let output = '';
        for (let i = 1; i <= total; i++) {
          const key = 'q' + i;
          const userAnswer = form.querySelector(`input[name="${key}"]:checked`).value;
          const correct = correctAnswers[key];
          const isCorrect = userAnswer === correct;
          if (isCorrect) score++;
          output += `
            <div class="question-result">
              <strong>${i}.</strong> You answered "<em>${userAnswer}</em>". 
              ${isCorrect
                ? '<span class="correct">Correct.</span>'
                : '<span class="incorrect">Incorrect.</span>'}
              <div class="explanation">${explanations[key]}</div>
            </div>
          `;
        }
        output += `<h3>Your total score: ${score} / ${total}</h3>`;
        document.getElementById('results').innerHTML = output;
      });

      // initialize progress
      updateProgress();
    })();
  </script>
</body>
</html>
