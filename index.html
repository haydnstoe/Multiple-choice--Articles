<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Article Usage Test</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 2em;
      line-height: 1.5;
    }
    select.invalid {
      outline: 2px solid red;
    }
    .error-message {
      color: red;
      margin-bottom: 1em;
    }
    #progress {
      margin-bottom: 1em;
      font-size: 1.1em;
    }
    #results {
      margin-top: 2em;
      border-top: 1px solid #ccc;
      padding-top: 1em;
    }
    .question-result {
      margin-bottom: 1em;
    }
    .correct {
      color: green;
      font-weight: bold;
    }
    .incorrect {
      color: red;
      font-weight: bold;
    }
    .explanation {
      margin-left: 1.5em;
      font-size: 0.9em;
    }
  </style>
</head>
<body>

  <h1>Article Usage Test</h1>
  <p>Every article has been removed from the text below. Select the correct article for each blank.</p>
  <div id="progress">Questions answered: 0 of 30</div>
  <div id="error" class="error-message"></div>

  <form id="articleTest">

    <p>1. I was strolling along 
      <select name="q1"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      Via Sistina one morning.</p>

    <p>2. 
      <select name="q2"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      Fiat Croma shot past and screeched to 
      <select name="q3"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      smoky halt 
      <select name="q4"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      hundred feet up 
      <select name="q5"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      road.</p>

    <p>3. Without pause 
      <select name="q6"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      driver lurched into reverse and came barrelling backwards down 
      <select name="q7"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      street in 
      <select name="q8"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      direction of 
      <select name="q9"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      parking space that was precisely 
      <select name="q10"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      length of his Fiat, less two and 
      <select name="q11"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      half feet.</p>

    <p>4. Without slowing even fractionally, he veered 
      <select name="q12"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      car into 
      <select name="q13"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      space and crashed resoundingly into 
      <select name="q14"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      parked Renault.</p>

    <p>5. Nothing happened for 
      <select name="q15"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      minute.</p>

    <p>6. There was just 
      <select name="q16"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      hiss of escaping steam.</p>

    <p>7. Then 
      <select name="q17"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      driver leaped from his car.</p>

    <p>8. He gazed in profound disbelief at 
      <select name="q18"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      devastation before him – crumpled metal, splintered tail lights, 
      <select name="q19"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      exhaust pipe of his own car limply grazing 
      <select name="q20"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      pavement – and regarded it with as much mystification as if it had dropped on him from 
      <select name="q21"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      sky.</p>

    <p>9. He kicked 
      <select name="q22"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      Renault in 
      <select name="q23"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      side as hard as he could, denting 
      <select name="q24"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      door and punishing its absent owner for having 
      <select name="q25"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      gall to park it there.</p>

    <p>10. Peace returned once again to 
      <select name="q26"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      Via Sistina, apart from 
      <select name="q27"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      occasional clank of 
      <select name="q28"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      piece of metal dropping off 
      <select name="q29"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      stricken Renault.</p>

    <p>11. No one but me batted 
      <select name="q30"><option value="">--</option><option value="the">the</option><option value="a">a/an</option><option value="nothing">nothing</option></select> 
      eye.</p>

    <button type="submit">Submit Answers</button>
  </form>

  <div id="results"></div>

  <script>
    (function() {
      const form = document.getElementById('articleTest');
      const total = 30;
      const progressDiv = document.getElementById('progress');
      const errorDiv = document.getElementById('error');

      const correctAnswers = {
        q1: 'the',  q2: 'a',  q3: 'a',  q4: 'a',  q5: 'the',
        q6: 'the', q7: 'the', q8: 'the', q9: 'a', q10: 'the',
        q11: 'a', q12: 'the', q13: 'the', q14: 'a', q15: 'a',
        q16: 'the', q17: 'the', q18: 'the', q19: 'the', q20: 'the',
        q21: 'the', q22: 'the', q23: 'the', q24: 'the', q25: 'the',
        q26: 'the', q27: 'the', q28: 'a', q29: 'the', q30: 'a'
      };

      const explanations = {
        q1: 'Use "the" for Via Sistina.',
        q2: 'Use "a" for a Fiat Croma.',
        q3: 'Use "a" for a smoky halt.',
        q4: 'Use "a" for a hundred feet.',
        q5: 'Use "the" for the road.',
        q6: 'Use "the" for the driver.',
        q7: 'Use "the" for the street.',
        q8: 'Use "the" for the direction.',
        q9: 'Use "a" for a parking space.',
        q10: 'Use "the" for the length.',
        q11: 'Use "a" for a half feet.',
        q12: 'Use "the" for the car.',
        q13: 'Use "the" for the space.',
        q14: 'Use "a" for a parked Renault.',
        q15: 'Use "a" for a minute.',
        q16: 'Use "the" for the hiss.',
        q17: 'Use "the" for the driver.',
        q18: 'Use "the" for the devastation.',
        q19: 'Use "the" for the exhaust pipe.',
        q20: 'Use "the" for the pavement.',
        q21: 'Use "the" for the sky.',
        q22: 'Use "the" for the Renault.',
        q23: 'Use "the" for the side.',
        q24: 'Use "the" for the door.',
        q25: 'Use "the" for the gall.',
        q26: 'Use "the" for Via Sistina.',
        q27: 'Use "the" for the occasional clank.',
        q28: 'Use "a" for a piece of metal.',
        q29: 'Use "the" for the stricken Renault.',
        q30: 'Use "a" (an) for an eye.'
      };

      function updateProgress() {
        let answered = 0;
        for (let i = 1; i <= total; i++) {
          const sel = form.querySelector(`select[name="q${i}"]`);
          if (sel && sel.value) answered++;
        }
        progressDiv.textContent = `Questions answered: ${answered} of ${total}`;
      }

      form.addEventListener('change', () => {
        errorDiv.textContent = '';
        form.querySelectorAll('select').forEach(sel => sel.classList.remove('invalid'));
        updateProgress();
      });

      form.addEventListener('submit', function(e) {
        e.preventDefault();
        errorDiv.textContent = '';
        let allAnswered = true;

        for (let i = 1; i <= total; i++) {
          const sel = form.querySelector(`select[name="q${i}"]`);
          if (!sel.value) {
            allAnswered = false;
            sel.classList.add('invalid');
          }
        }

        if (!allAnswered) {
          errorDiv.textContent = 'Please answer all questions before submitting.';
          return;
        }

        let score = 0;
        let output = '';

        for (let i = 1; i <= total; i++) {
          const key = 'q' + i;
          const sel = form.querySelector(`select[name="${key}"]`);
          const user = sel.value;
          const correct = correctAnswers[key];
          const isCorrect = user === correct;
          if (isCorrect) score++;
          output += `
            <div class="question-result">
              <strong>${i}.</strong> You chose "<em>${user}</em>". 
              ${isCorrect ? '<span class="correct">Correct.</span>' : '<span class="incorrect">Incorrect.</span>'}
              <div class="explanation">${explanations[key]}</div>
            </div>
          `;
        }

        output += `<h3>Your total score: ${score} / ${total}</h3>`;
        document.getElementById('results').innerHTML = output;
      });

      updateProgress();
    })();
  </script>

</body>
</html>
